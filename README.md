# MapReduce Python Implementation

This repository contains an implementation of the MapReduce framework in Python, developed as a part of the CSE530 Distributed Systems course project. The implementation supports three applications/queries: Word Count, Inverted Index [Record-Level Inverted index], and Natural Join.

## Components Implemented

Our implementation consists of the following components:
### Master

The master program/process is responsible for running and communicating with the other components in the system. When running the master program, the user should provide:

    input data location
    number of mappers (M)
    number of reducers (R)
    output data location

### Input Split

We have written code to divide the input data into smaller chunks that can be processed in parallel by multiple mappers. For simplicity, we have assumed that the input data consists of multiple data files and each file is processed by a separate single mapper.

### Map

We have written code to apply the Map function to each input split to generate intermediate key-value pairs. The Map function takes a key-value pair as input and produces a set of intermediate key-value pairs as output. The output of each Map function is written to a file in the mapper’s directory on the local file system. Note that each mapper is run as a different process.

### Partition

The output of the Map function (as mentioned in the mapper above) also needs to be partitioned into a set of smaller partitions. In this step, we have written a function that takes the list of key-value pairs generated by the Map function and partitions them into a set of smaller partitions. The partitioning function ensures that all key-value pairs with the same key are sent to the same partition. Each partition is then picked up by a specific reducer during shuffling and sorting.

### Shuffle and Sort

We have written code to sort the intermediate key-value pairs by key and group the values that belong to the same key. This is typically done by sending the intermediate key-value pairs to the reducers based on the key. Shuffling and sorting is done by the reducer.
### Reduce

We have written code to apply the Reduce function to each group of values that belong to the same key to generate the final output. The Reduce function takes a key and a set of values as input and produces a set of final key-value pairs as output. The output of each Reduce function is written to a file in the reducer’s directory on the local file system. Note that each reducer is run as a different process.

## How to Run

To run the MapReduce framework, follow these steps:

Clone the repository:
```
git clone https://github.com/your_username/map-reduce-python.git
```

Navigate to the cloned repository:
```
cd map-reduce-python
```
Install requirements


```
pip install -r requirements.txt
```

use the cli to run the framework
```
./mr-cli.py --help
```

Run testcases:
```
./mr-cli.py run  2 2 NATURAL_JOIN testcases/natural\ join
./mr-cli.py run  3 2 WORD_COUNT testcases/word\ count
./mr-cli.py run  3 2 INVERTED_INDEX testcases/inverted\ index
```

## Adding custom jobs  

To add a custom job, you need to create a new class that inherits from the `Job` class and implement the `map` and `reduce` methods.
then add the job to the TASKS enum in the map_reduce/config_map.py file and you are good to go.

## References

[1] [MapReduce: Simplified Data Processing on Large Clusters](https://static.googleusercontent.com/media/research.google.com/en//archive/mapreduce-osdi04.pdf)
